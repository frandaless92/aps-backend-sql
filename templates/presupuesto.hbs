<html lang="es">
  <head>
    <meta charset="UTF-8" />

    <style>
      body { font-family: Arial, Helvetica, sans-serif; margin: 0; padding:
      20px; font-size: 13px; color: #000; } /* Margen general de cada hoja */
      @page { margin: 25mm; } /* PREVENIR CORTES EN ELEMENTOS IMPORTANTES */
      .header, table, tr, td, th, .client-box { page-break-inside: avoid
      !important; } /* CONTENEDOR GENERAL */ .border-box { padding: 25px;
      border-radius: 12px; background: linear-gradient( to bottom, #d8ecff 0%,
      #ffffff 45%, #ffffff 55%, #d8ecff 100% ); border: 2px solid #bcd9f5;
      box-shadow: 0px 0px 12px rgba(0, 0, 0, 0.08); box-sizing: border-box; }
      .header { display: flex; justify-content: space-between; align-items:
      flex-start; margin-bottom: 20px; } .logo { width: 180px; } .cuadro-x {
      width: 60px; height: 60px; border: 2px solid #000; display: flex;
      justify-content: center; align-items: center; font-size: 26px;
      font-weight: bold; margin: 0 20px; user-select: none; } .presupuesto-info
      { text-align: right; font-size: 13px; line-height: 1.4; }
      .presupuesto-info strong { font-size: 18px; } .section-title {
      font-weight: bold; margin-top: 20px; margin-bottom: 6px; border-bottom:
      1px solid #000; padding-bottom: 3px; font-size: 14px; } .client-box {
      padding: 8px 0; font-size: 13px; } table { width: 100%; border-collapse:
      collapse; margin-top: 12px; font-size: 13px; } th, td { text-align: center
      !important; border: 1px solid #444; padding: 6px; vertical-align: middle;
      } th { background: #98dceb; font-weight: bold; } .total { margin-top:
      20px; text-align: right; font-size: 17px; font-weight: bold; } /*
      =============== FOOTER REPETIDO EN TODAS LAS HOJAS =============== */ /*
      Declaramos el footer como "running element" */ .footer { position:
      running(footer); } /* Le decimos a @page que imprima el running footer
      abajo */ @page { @bottom-center { content: element(footer); } }
      .footer-content { font-size: 11px; color: #555; width: 100%; border-top:
      1px solid #ccc; padding-top: 6px; margin-top: 20px; text-align: center; }
      .footer-content p { margin: 0; } .footer-cierre { margin-top: 6px;
      font-weight: bold; } .page-number { font-size: 10px; margin-top: 4px; }
    </style>
  </head>

  <body>
    <div class="border-box">
      <!-- ENCABEZADO -->
      <div class="header">
        <img src="data:image/png;base64,{{logoBase64}}" class="logo" />

        <div class="cuadro-x">X</div>

        <div class="presupuesto-info">
          <strong>PRESUPUESTO</strong><br />
          Nº
          {{presupuestoNumero}}<br />
          Fecha:
          {{fecha}}<br />
          Válido hasta:
          {{validez}}<br /><br />
          Trabajó:
          {{trabajo}}<br />
          Vendedor:
          {{vendedor}}<br />
          Condición de pago:
          {{condicionPago}}
        </div>
      </div>

      <!-- DATOS FÁBRICA -->
      <div class="client-box">
        <strong>A.P.S. ALAMBRES PERIMETRALES DEL SUR</strong><br />
        Fábrica de Tejidos Romboidales<br />
        Antonio Lamberti N° 970, Glew, Buenos Aires<br />
        Teléfono: +54 11-6017-6013<br />
        De Claudia A. Báez.<br />
      </div>

      <!-- CLIENTE -->
      <div class="section-title">Datos del Cliente</div>
      <div class="client-box">
        <strong>{{cliente.apellido}}, {{cliente.nombre}}</strong><br />
        Empresa:
        {{cliente.empresa}}<br />
        Dirección:
        {{cliente.direccion}}<br />
        Teléfono:
        {{cliente.telefono}}<br />
        Email:
        {{cliente.email}}
      </div>

      <!-- DETALLE -->
      <div class="section-title">Detalle</div>

      <table>
        <thead>
          <tr>
            <th style="width: 70px;">Cant.</th>
            <th>Descripción</th>
            <th style="width: 120px;">Precio Unit.</th>
            <th style="width: 120px;">Subtotal</th>
          </tr>
        </thead>

        <tbody>
          {{#each items}}
            <tr>
              <td>{{cantidad}}</td>
              <td>{{descripcion}}</td>
              <td>$ {{precio_unitario}}</td>
              <td>$ {{precio_total}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>

      <div class="total">TOTAL: $ {{total}}</div>

      <!-- FOOTER REPETIDO -->
      <div class="footer">
        <div class="footer-content">
          <p>Este es un presupuesto de los artículos indicados, sujeto a
            condiciones:</p>
          * Valores expresados en ARS.<br />
          * Validez según fecha indicada.<br />
          * Entrega estimada: hasta 5 días.<br />
          * No incluye traslado ni instalación.<br />

          <div class="footer-cierre">¡MUCHAS GRACIAS POR SU CONFIANZA!</div>

          <!-- Numeración de páginas -->
          <div class="page-number">
            Página
            <span class="pageNumber"></span>
            de
            <span class="totalPages"></span>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>